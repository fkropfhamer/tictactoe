!function(t){var n={};function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)i.d(e,a,function(n){return t[n]}.bind(null,a));return e},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="",i(i.s=4)}([function(t,n,i){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var i=function(t,n){var i=t[1]||"",e=t[3];if(!e)return i;if(n&&"function"==typeof btoa){var a=(o=e,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),r=e.sources.map((function(t){return"/*# sourceURL=".concat(e.sourceRoot||"").concat(t," */")}));return[i].concat(r).concat([a]).join("\n")}var o,s,c;return[i].join("\n")}(n,t);return n[2]?"@media ".concat(n[2]," {").concat(i,"}"):i})).join("")},n.i=function(t,i,e){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(e)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(a[o]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);e&&a[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),n.push(c))}},n}},function(t,n,i){var e=i(2),a=i(3);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var r={insert:"head",singleton:!1};e(a,r);t.exports=a.locals||{}},function(t,n,i){"use strict";var e,a=function(){return void 0===e&&(e=Boolean(window&&document&&document.all&&!window.atob)),e},r=function(){var t={};return function(n){if(void 0===t[n]){var i=document.querySelector(n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[n]=i}return t[n]}}(),o=[];function s(t){for(var n=-1,i=0;i<o.length;i++)if(o[i].identifier===t){n=i;break}return n}function c(t,n){for(var i={},e=[],a=0;a<t.length;a++){var r=t[a],c=n.base?r[0]+n.base:r[0],h=i[c]||0,d="".concat(c," ").concat(h);i[c]=h+1;var l=s(d),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==l?(o[l].references++,o[l].updater(u)):o.push({identifier:d,updater:m(u,n),references:1}),e.push(d)}return e}function h(t){var n=document.createElement("style"),e=t.attributes||{};if(void 0===e.nonce){var a=i.nc;a&&(e.nonce=a)}if(Object.keys(e).forEach((function(t){n.setAttribute(t,e[t])})),"function"==typeof t.insert)t.insert(n);else{var o=r(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}return n}var d,l=(d=[],function(t,n){return d[t]=n,d.filter(Boolean).join("\n")});function u(t,n,i,e){var a=i?"":e.media?"@media ".concat(e.media," {").concat(e.css,"}"):e.css;if(t.styleSheet)t.styleSheet.cssText=l(n,a);else{var r=document.createTextNode(a),o=t.childNodes;o[n]&&t.removeChild(o[n]),o.length?t.insertBefore(r,o[n]):t.appendChild(r)}}function f(t,n,i){var e=i.css,a=i.media,r=i.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),r&&btoa&&(e+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}var p=null,v=0;function m(t,n){var i,e,a;if(n.singleton){var r=v++;i=p||(p=h(n)),e=u.bind(null,i,r,!1),a=u.bind(null,i,r,!0)}else i=h(n),e=f.bind(null,i,n),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else a()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=a());var i=c(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var e=0;e<i.length;e++){var a=s(i[e]);o[a].references--}for(var r=c(t,n),h=0;h<i.length;h++){var d=s(i[h]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}i=r}}}},function(t,n,i){"use strict";i.r(n);var e=i(0),a=i.n(e)()(!1);a.push([t.i,"* {\n    margin: 0;\n    padding: 0;\n}\n\nhtml, body {\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    overflow: hidden;\n    display: block;\n}\n\ncanvas {\n    margin: 0 auto;\n    display: block;\n}\n",""]),n.default=a},function(t,n,i){"use strict";i.r(n);i(1);let e,a,r;function o(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}!function(t){t[t.Empty=0]="Empty",t[t.X=1]="X",t[t.O=2]="O"}(e||(e={})),function(t){t.Black="black",t.White="white"}(a||(a={})),function(t){t[t.Tie=0]="Tie",t[t.OWin=1]="OWin",t[t.XWin=-1]="XWin"}(r||(r={}));class s{}function c(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}o(s,"CANVAS_SIZE",500),o(s,"BACKGROUND_COLOR",a.Black),o(s,"DRAW_COLOR",a.White);class h{constructor(){c(this,"canvas",void 0),c(this,"context",void 0),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.style.backgroundColor=s.BACKGROUND_COLOR,this.canvas.width=s.CANVAS_SIZE,this.canvas.height=s.CANVAS_SIZE,document.getElementById("root").appendChild(this.canvas)}drawBoard(t){this.drawGrid(),t.forEach((t,n)=>{t.forEach((t,i)=>{this.drawBoardState(n,i,t)})})}addClickEventListener(t){this.canvas.addEventListener("click",n=>{const i=n.offsetX,e=n.offsetY,a=this.canvas.width/3,r=Math.floor(i/a),o=Math.floor(e/a);t(r,o)})}drawWinningLine(t){const n=this.mapBoardPosition(t[0].i),i=this.mapBoardPosition(t[0].j),e=this.mapBoardPosition(t[2].i),a=this.mapBoardPosition(t[2].j);this.drawLine(n,i,e,a)}clearCanvas(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawGrid()}drawLine(t,n,i,e){this.context.beginPath(),this.context.moveTo(t,n),this.context.lineTo(i,e),this.context.strokeStyle=s.DRAW_COLOR,this.context.stroke()}drawCircle(t,n,i){this.context.beginPath(),this.context.arc(t,n,i,0,2*Math.PI),this.context.strokeStyle=s.DRAW_COLOR,this.context.stroke()}drawCross(t,n,i){this.drawLine(t-i,n-i,t+i,n+i),this.drawLine(t+i,n-i,t-i,n+i)}drawGrid(){this.drawLine(this.canvas.width/3,0,this.canvas.width/3,this.canvas.height),this.drawLine(2*this.canvas.width/3,0,2*this.canvas.width/3,this.canvas.height),this.drawLine(0,this.canvas.height/3,this.canvas.width,this.canvas.height/3),this.drawLine(0,2*this.canvas.height/3,this.canvas.width,2*this.canvas.height/3)}mapBoardPosition(t){return(2*t+1)*(this.canvas.width/6)}drawBoardState(t,n,i){const a=this.mapBoardPosition(t),r=this.mapBoardPosition(n);i===e.O&&this.drawCircle(a,r,this.canvas.height/10),i===e.X&&this.drawCross(a,r,this.canvas.height/10)}}function d(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}class l{constructor(){d(this,"view",void 0),d(this,"playBoard",void 0),this.view=new h,this.clearBoard(),this.view.addClickEventListener(this.changeBoardState.bind(this))}changeBoardState(t,n){this.playBoard[t][n]===e.Empty&&(this.playBoard[t][n]=e.X,this.view.drawBoard(this.playBoard),this.isEndingState()?this.handleEnd():this.botTurn())}handleEnd(){const t=this.getEndingState();let n;switch(t){case r.Tie:n="Tie! :|";break;case r.OWin:n="You lost! :(";break;case r.XWin:n="You won :D";break;default:throw Error("unknwon end state: "+t)}t!==r.Tie&&this.view.drawWinningLine(this.getWinningLine()),setTimeout(()=>{alert(n),this.clearBoard()})}clearBoard(){const t=[e.Empty,e.Empty,e.Empty],n=[e.Empty,e.Empty,e.Empty],i=[e.Empty,e.Empty,e.Empty];this.playBoard=[t,n,i],this.view.clearCanvas()}boardIsFull(){return!this.playBoard.map(t=>t.map(t=>t===e.Empty).reduce((t,n)=>t||n,!1)).reduce((t,n)=>t||n,!1)}playerHasWon(){return 3===this.getWinningLine().length}getWinningLine(){for(let t=0;t<3;t++){if(this.isWinningLine(this.playBoard[t][0],this.playBoard[t][1],this.playBoard[t][2]))return[{i:t,j:0},{i:t,j:1},{i:t,j:2}];if(this.isWinningLine(this.playBoard[0][t],this.playBoard[1][t],this.playBoard[2][t]))return[{i:0,j:t},{i:1,j:t},{i:2,j:t}]}return this.isWinningLine(this.playBoard[0][0],this.playBoard[1][1],this.playBoard[2][2])?[{i:0,j:0},{i:1,j:1},{i:2,j:2}]:this.isWinningLine(this.playBoard[2][0],this.playBoard[1][1],this.playBoard[0][2])?[{i:2,j:0},{i:1,j:1},{i:0,j:2}]:[]}isEndingState(){return this.playerHasWon()||this.boardIsFull()}getEndingState(){if(this.isEndingState()){if(this.playerHasWon()){const t=this.getWinningLine()[0];return this.playBoard[t.i][t.j]===e.O?r.OWin:r.XWin}return r.Tie}throw Error("game has not ended")}isWinningLine(t,n,i){const a=t===n,r=n===i,o=i!==e.Empty;return a&&r&&o}botTurn(){this.minimaxTurn(),this.view.drawBoard(this.playBoard),this.isEndingState()&&this.handleEnd()}randomTurn(){let t,n;for(;t=Math.floor(3*Math.random()),n=Math.floor(3*Math.random()),this.playBoard[t][n]!==e.Empty;);this.playBoard[t][n]=e.O}minimaxTurn(){let t,n=-1/0;for(let i=0;i<3;i++)for(let a=0;a<3;a++)if(this.playBoard[i][a]===e.Empty){this.playBoard[i][a]=e.O;const r=this.minimax(this.playBoard,!1,0);this.playBoard[i][a]=e.Empty,r>n&&(n=r,t={i:i,j:a}),r===n&&(t=Math.random()<.2?t:{i:i,j:a})}this.playBoard[t.i][t.j]=e.O}minimax(t,n,i){if(this.isEndingState())return this.getEndingState();let a;if(n){a=-1/0;for(let t=0;t<3;t++)for(let n=0;n<3;n++)if(this.playBoard[t][n]===e.Empty){this.playBoard[t][n]=e.O;const r=this.minimax(this.playBoard,!1,i+1);this.playBoard[t][n]=e.Empty,a=Math.max(r,a)}}else{a=1/0;for(let t=0;t<3;t++)for(let n=0;n<3;n++)if(this.playBoard[t][n]===e.Empty){this.playBoard[t][n]=e.X;const r=this.minimax(this.playBoard,!0,i+1);this.playBoard[t][n]=e.Empty,a=Math.min(r,a)}}return a}}new l}]);